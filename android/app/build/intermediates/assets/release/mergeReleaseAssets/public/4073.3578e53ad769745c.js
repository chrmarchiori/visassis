"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4073],{4073:(g,m,d)=>{d.r(m),d.d(m,{CameraPreview:()=>h,CameraPreviewWeb:()=>p});var i=d(5861),v=d(7423);class p extends v.Uw{constructor(){super({name:"CameraPreview",platforms:["web"]})}start(e){var r=this;return(0,i.Z)(function*(){return new Promise(function(){var s=(0,i.Z)(function*(c,a){yield navigator.mediaDevices.getUserMedia({audio:!e.disableAudio,video:!0}).then(t=>{t.getTracks().forEach(u=>u.stop())}).catch(t=>{a(t)});const n=document.getElementById("video"),o=document.getElementById(e.parent);if(n)a({message:"camera already started"});else{const t=document.createElement("video");t.id="video",t.setAttribute("class",e.className||""),"rear"!==e.position&&t.setAttribute("style","-webkit-transform: scaleX(-1); transform: scaleX(-1);");const u=navigator.userAgent.toLowerCase();if(u.includes("safari")&&!u.includes("chrome")&&(t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true")),o.appendChild(t),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const f={video:{width:{ideal:e.width},height:{ideal:e.height}}};"rear"===e.position?(f.video.facingMode="environment",r.isBackCamera=!0):r.isBackCamera=!1,navigator.mediaDevices.getUserMedia(f).then(function(l){t.srcObject=l,t.play(),c({})},l=>{a(l)})}}});return function(c,a){return s.apply(this,arguments)}}())})()}stop(){return(0,i.Z)(function*(){const e=document.getElementById("video");if(e){e.pause();const a=e.srcObject.getTracks();for(var r=0;r<a.length;r++)a[r].stop();e.remove()}})()}capture(e){var r=this;return(0,i.Z)(function*(){return new Promise((s,c)=>{const a=document.getElementById("video"),n=document.createElement("canvas"),o=n.getContext("2d");let t;n.width=a.videoWidth,n.height=a.videoHeight,r.isBackCamera||(o.translate(a.videoWidth,0),o.scale(-1,1)),o.drawImage(a,0,0,a.videoWidth,a.videoHeight),t=null!=e.quality?n.toDataURL("image/jpeg",e.quality/100).replace("data:image/jpeg;base64,",""):n.toDataURL("image/png").replace("data:image/png;base64,",""),s({value:t})})})()}captureSample(e){var r=this;return(0,i.Z)(function*(){return r.capture(e)})()}getSupportedFlashModes(){return(0,i.Z)(function*(){throw new Error("getSupportedFlashModes not supported under the web platform")})()}setFlashMode(e){return(0,i.Z)(function*(){throw new Error("setFlashMode not supported under the web platform")})()}flip(){return(0,i.Z)(function*(){throw new Error("flip not supported under the web platform")})()}setOpacity(e){return(0,i.Z)(function*(){const r=document.getElementById("video");r&&e.opacity&&r.style.setProperty("opacity",e.opacity.toString())})()}}const h=new p;(0,v.fK)(h)}}]);